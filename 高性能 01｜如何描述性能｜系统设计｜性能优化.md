---
source: https://www.bilibili.com/video/BV1wRbkzmE6d/?spm_id_from=333.1387.upload.video_card.click&vd_source=549bde2564979641a5f0adbcfa529b0a
title: 高性能 01｜如何描述性能｜系统设计｜性能优化
---

#性能
# why
看看性能

# conclusion
- load, 负载. 系统处理的工作量. 可以用若干个指标量化表示.
- 负载指标:
	- QPS, 每秒请求处理次数. 描述 web 系统能力.
	- 内存使用情况, 可用内存/已用内存/内存使用率.
	- TPS, 每秒事务处理次数. 描述 DB 查询能力.
- 常态看平均值: 资源利用率, 是否要扩容.
- 瓶颈看峰值: 通过压测识别系统极限.
- performance, 性能. 在给定的资源下, 系统的负载指标.
	- throughput, 吞吐量.
		- QPS
		- TPS
		- 离线任务的整体耗时
		- 峰值时的写入
	- latency/response time, 延迟/响应时间:
		- 延迟, 服务器处理请求的时间.
		- 延迟的指标: P99. 例如, P99=100ms, 表示 99%的请求耗时<100ms.
		- 响应时间, 网络时间 + 排队时间 + 延迟. 
		- 即便请求是不变的, 因为各种资源的情况是变动的, 响应时间会变.
		- 长尾效应, aka, 尾部延迟. CPU 内核数 < 请求数, 正在处理的请求会阻塞后续请求.
	- SLA, service level agreement. 服务预期质量和可用性协议. 指标:
		- 可用性. 6个9, 99.9999% 可用.
		- 故障恢复时间.
- 平均并发数 = 吞吐量 x 平均响应时间
- 工具:
	- 处理时间: tracing, 日志, 下游响应时间
	- 排队延迟: pprof/runtime gc

# rate
4